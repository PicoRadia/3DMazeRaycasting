
window.onload=function(){mapWidth=map[0].length,mapHeight=map.length,addKeys(),initScreen(),initspriteites(),initEnemies(),drawMap(),gameCycle(),renderCycle()};var $=function(e){return document.getElementById(e)},lastGameCycleTime=0,gameCycleDelay=1e3/30;gameCycle=function(){var e=(new Date).getTime(),a=e-lastGameCycleTime;move(a);var t=gameCycleDelay;a>t&&(t=Math.max(1,t-(a-t))),lastGameCycleTime=e,setTimeout(gameCycle,t)},renderCycle=function(){updateMap(),clearspriteites(),castRays(),renderspriteites(),renderEnemies(),updateBackground(),setTimeout(renderCycle,gameCycleDelay)};